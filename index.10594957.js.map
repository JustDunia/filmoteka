{"mappings":"qhBAcA,SAASA,EAASC,EAAMC,EAAMC,GAC5B,IAAIC,EAASC,EAAMC,EAASC,EAAWC,EAGvC,SAASC,IACP,IAAIC,EAAOC,KAAKC,MAAQL,EAEpBG,EAAOR,GAAQQ,GAAQ,EACzBN,EAAUS,WAAWJ,EAAOP,EAAOQ,IAEnCN,EAAU,KACLD,IACHK,EAASP,EAAKa,MAAMR,EAASD,GAC7BC,EAAUD,EAAO,MAGvB,CAdI,MAAQH,IAAMA,EAAO,KAgBzB,IAAIa,EAAY,WACdT,EAAUU,KACVX,EAAOY,UACPV,EAAYI,KAAKC,MACjB,IAAIM,EAAUf,IAAcC,EAO5B,OANKA,IAASA,EAAUS,WAAWJ,EAAOP,IACtCgB,IACFV,EAASP,EAAKa,MAAMR,EAASD,GAC7BC,EAAUD,EAAO,MAGZG,CACT,EAmBA,OAjBAO,EAAUI,MAAQ,WACZf,IACFgB,aAAahB,GACbA,EAAU,KAEd,EAEAW,EAAUM,MAAQ,WACZjB,IACFI,EAASP,EAAKa,MAAMR,EAASD,GAC7BC,EAAUD,EAAO,KAEjBe,aAAahB,GACbA,EAAU,KAEd,EAEOW,CACT,CAGAf,EAASsB,SAAWtB,E,2CC9DpB,MAAMuB,EAAYC,SAASC,cAAc,gBAEnCC,EAAaF,SAASC,cAAc,gBAE1C,IAAIE,EAAa,GACjB,MAAMC,EAAUJ,SAASC,cAAc,aACjCI,EAAoBL,SAASC,cAAc,uBAEjD,IAAIK,EAAc,EACdC,EAAa,EAEjB,MAAMC,EAAoBC,MAAOC,EAAOC,UAClBC,EAAAC,QAAMC,IACxB,iHACoFJ,UAAcC,yBAKtG,SAASI,EAAYC,GACS,IAAxBA,EAAOC,KAAKC,QACdb,EAAkBc,UAAUC,OAAO,aAEnCf,EAAkBc,UAAUE,OAAO,aAGrC,MAAMC,EAAON,EAAOC,KAAKC,QACtBK,KAAIC,GACI,oEAEqBA,EAAMC,+BAA+BD,EAAME,kBACrEF,EAAMC,WAENE,MAAMC,OAAOC,SAASL,EAAMM,eACxB,eACAF,OAAOC,SAASL,EAAMM,sDACaN,EAAMO,+FAGpCP,EAAMC,iFAGLD,EAAMQ,UAAUT,KAAIU,IAAW,EAAAC,EAAAC,qBAAoBF,KAAUG,KAAK,WAC5ET,MAAMC,OAAOC,SAASL,EAAMM,eACxB,eACAF,OAAOC,SAASL,EAAMM,mEAM7BM,KAAK,IACRrC,EAAUsC,mBACR,YACAf,EAAKgB,WACH,sCACA,6FAGJlC,EAAQe,UAAUoB,IAAI,SACxB,CAsDArC,EAAWsC,iBAAiB,UApD5B,SAAqBC,GACnBA,EAAMC,iBACN,MACEC,UAAUC,YAAEA,IACVH,EAAMI,cACV1C,EAAayC,EAAYE,MACzBC,KAAO,EAEPhD,EAAUiD,UAAY,GAGpBxC,EAAkBoC,EAAYE,MAAO,GAAGG,MAAKC,IAC3C3C,EAAa2C,EAASjC,KAAKkC,cAC3BC,EAAWC,MAAM9C,GACjBQ,EAAYmC,EAAA,IAIhB,MAAME,EAAa,IAAIE,EAAAC,GAAJ,CAAevD,SAASwD,eAAe,4BAA6B,CACrFC,WAAYlD,EACZmD,aAAc,GACdC,aAAc,EACdZ,KAAMzC,EACNsD,aAAa,EAEbC,SAAU,CACRd,KAAM,gDACNe,YAAa,iEACbC,aAAc,6DACdC,WACE,mGAGFC,mBACE,gHAGFC,WACE,uGAMNd,EAAWe,GAAG,aAAa1D,eAAgB2D,GACzC9D,EAAc8D,EAAUrB,KACxB,MAAMG,QAAiB1C,EAAkBoC,EAAYE,MAAOxC,GAC5DC,EAAa2C,EAASC,cACtBpD,EAAUiD,UAAY,GACtBjC,EAAYmC,EACd,GACF","sources":["node_modules/debounce/index.js","src/js/search.js"],"sourcesContent":["/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","import { debounce } from 'debounce';\nimport axios from 'axios';\nimport { idToGenereTranslate } from './helpers';\nimport Pagination from 'tui-pagination';\n\nconst listFilms = document.querySelector('.movies-list');\nconst API_KEY = '4e9fa3fc2487236fdff94602c5bb9552';\nconst imagesForm = document.querySelector('#header-form');\nconst DEBOUNCE_DELAY = 300;\nlet searchMore = '';\nconst spinner = document.querySelector('.sk-chase');\nconst messageNoResoults = document.querySelector('.header-form__alert');\n\nlet currentPage = 1;\nlet totalItems = 0;\n\nconst fetchSearchMovies = async (query, page) => {\n  const table = await axios.get(\n    `\n    https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&language=en-US&query=${query}&page=${page}&include_adult=false`,\n  );\n  return table;\n};\n\nfunction renderFilms(images) {\n  if (images.data.results === 0) {\n    messageNoResoults.classList.remove('is-hidden');\n  } else {\n    messageNoResoults.classList.toggle('is-hidden');\n  }\n\n  const card = images.data.results\n    .map(image => {\n      return `\n      <li class=\"movie-item\">\n        <img class=\"boxID\" alt=\"${image.title} movie poster\" movieID=${image.id} movieTitle=\"${\n        image.title\n      } | ${\n        isNaN(Number.parseInt(image.release_date))\n          ? 'No year info'\n          : Number.parseInt(image.release_date)\n      }\" src=\"https://image.tmdb.org/t/p/w500${image.poster_path}\"\n        <div class=\"info\">\n          <p class=\"info__title\">\n            <b>${image.title}</b>\n          </p>\n          <p class=\"info__genre\">\n            <b> ${image.genre_ids.map(element => idToGenereTranslate(element)).join(`, `)} | ${\n        isNaN(Number.parseInt(image.release_date))\n          ? 'No year info'\n          : Number.parseInt(image.release_date)\n      }\n          </b></p>\n        </div>\n      </li>`;\n    })\n    .join('');\n  listFilms.insertAdjacentHTML(\n    'beforeend',\n    card.replaceAll(\n      'https://image.tmdb.org/t/p/w500null',\n      'https://mateuszwoj-bit.github.io/GOIT-team-project-ice/squoosh-how1-desktop.b9f13a59.png',\n    ),\n  );\n  spinner.classList.add('hidden');\n}\n\nfunction searchFilms(event) {\n  event.preventDefault();\n  const {\n    elements: { searchQuery },\n  } = event.currentTarget;\n  searchMore = searchQuery.value;\n  page = 1;\n\n  listFilms.innerHTML = '';\n\n  {\n    fetchSearchMovies(searchQuery.value, 1).then(response => {\n      totalItems = response.data.total_results;\n      pagination.reset(totalItems);\n      renderFilms(response);\n    });\n  }\n\n  const pagination = new Pagination(document.getElementById('tui-pagination-container'), {\n    totalItems: totalItems,\n    itemsPerPage: 20,\n    visiblePages: 5,\n    page: currentPage,\n    centerAlign: false,\n\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n      disabledPage: '<span class=\"tui-page-btn tui-is-disabled\">{{page}}</span>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n        '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>',\n    },\n  });\n\n  pagination.on('afterMove', async function (eventData) {\n    currentPage = eventData.page;\n    const response = await fetchSearchMovies(searchQuery.value, currentPage);\n    totalItems = response.total_results;\n    listFilms.innerHTML = [] + [];\n    renderFilms(response);\n  });\n}\nimagesForm.addEventListener('submit', searchFilms);\n"],"names":["$6a84a6471c88e238$var$debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","last","Date","now","setTimeout","apply","debounced","this","arguments","callNow","clear","clearTimeout","flush","debounce","$d1fbd38f128097b7$var$listFilms","document","querySelector","$d1fbd38f128097b7$var$imagesForm","$d1fbd38f128097b7$var$searchMore","$d1fbd38f128097b7$var$spinner","$d1fbd38f128097b7$var$messageNoResoults","$d1fbd38f128097b7$var$currentPage","$d1fbd38f128097b7$var$totalItems","$d1fbd38f128097b7$var$fetchSearchMovies","async","query","page1","$hGVxz","default","get","$d1fbd38f128097b7$var$renderFilms","images","data","results","classList","remove","toggle","card","map","image","title","id","isNaN","Number","parseInt","release_date","poster_path","genre_ids","element","$48Q3A","idToGenereTranslate","join","insertAdjacentHTML","replaceAll","add","addEventListener","event","preventDefault","elements","searchQuery","currentTarget","value","page","innerHTML","then","response","total_results","pagination","reset","$parcel$interopDefault","$afPuq","getElementById","totalItems","itemsPerPage","visiblePages","centerAlign","template","currentPage","disabledPage","moveButton","disabledMoveButton","moreButton","on","eventData"],"version":3,"file":"index.10594957.js.map"}