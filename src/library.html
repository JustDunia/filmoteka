<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Filmoteka</title>
     <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/modern-normalize/1.0.0/modern-normalize.min.css"
      integrity="sha512-ISS7cAi1PEhQ8jnbJpJZMd29NlhNj4AWYyLOSp2CE/CsHxTCu+r+t0D2yoJudVrd0/8fTVPUVDzY5Tvli75u/g=="
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css"
    />
    <script src="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.js"></script>
  </head>
  <body>
    <!-- W taki sposbu dodajemy fragmenty w główny HTML-plik strony. -->
    <!-- <include src="./partials/example.html"></include> -->
    <include src="./partials/mylibrary-header.html"></include>
    <include src="./partials/movie-modal.html"></include>
    <include src="./partials/main-container.html"></include>
    <!-- <include src="./partials/main-container.html"></include> -->

    <include src="./partials/pagination.html"></include>
    <include src="./partials/footer.html"></include>
    <include src="./partials/spinner.html"></include>
    <!-- Skrypt jest na samym dole kodu. On juz ma w sobie podłączony SAAS plik. -->
    <script src="./index.js" type="module"></script>
    <script>
      const listFilms = document.querySelector('.movies-list');

      const parsed = JSON.parse(localStorage.getItem('WATCH_KEY'));
      console.log(typeof parsed);

      function renderFilms(images) {
        const card = parsed
          .map(image => {
            return `
    <li class="movie-item">
      <img class="boxID" alt="${image.title} movie poster" movieID="${image.id}" movieTitle="${
              image.title + ' ' + image.releaseDate
            }" src="${image.poster}">
      <div class="info">
        <p class="info__title">
          <b>${image.title}</b>
        </p>
        <p class="info__genre">
          <b> ${image.genres} | ${image.releaseDate}</b>
        </p>
      </div>
    </li>`;
          })
          .join('');
        listFilms.innerHTML = card;
      }

      renderFilms(parsed);
    </script>
    <script src="./js/movie-details.js" type="module"></script>
      <script src="./js/pagination.js" type="module"></script>
       <script src="./js/localStorage.js" type="module"></script>
      
  </body>
</html>
